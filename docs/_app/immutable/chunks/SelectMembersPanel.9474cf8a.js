import{S as Q,i as W,s as X,a as M,k as I,c as P,l as A,m as B,h as p,n as S,b as z,g as k,v as G,d as w,f as q,K as R,y as T,z as y,A as C,D as v,B as H,q as Y,r as $,w as Z,a1 as j,Y as x,O as ee}from"./index.c60bfe9f.js";import{R as te,T as le,U as ne,H as se,V as ie,L as re,x as ae,S as J}from"./StateButton.b8d3d3ce.js";function oe(n,e,t){var i=-1,l=n.length;e<0&&(e=-e>l?0:l+e),t=t>l?l:t,t<0&&(t+=l),l=e>t?0:t-e>>>0,e>>>=0;for(var f=Array(l);++i<l;)f[i]=n[i+e];return f}function ce(n,e){return e.length<2?n:te(n,oe(e,0,-1))}function fe(n,e){return e=le(e,n),n=ce(n,e),n==null||delete n[ne(se(e))]}var ue=Array.prototype,he=ue.splice;function _e(n,e){for(var t=n?e.length:0,i=t-1;t--;){var l=e[t];if(t==i||l!==f){var f=l;ie(l)?he.call(n,l,1):fe(n,l)}}return n}function me(n,e){var t=[];if(!(n&&n.length))return t;var i=-1,l=[],f=n.length;for(e=re(e);++i<f;){var r=n[i];e(r,i,n)&&(t.push(r),l.push(i))}return _e(n,l),t}function ge(n){return n&&n.length?ae(n):[]}function D(n,e,t){const i=n.slice();return i[13]=e[t],i[14]=e,i[15]=t,i}function L(n,e,t){const i=n.slice();return i[16]=e[t],i}function U(n){let e,t,i,l,f,r;t=new J({props:{states:["全員選ぶ","全員外す"]}}),t.$on("changeFrom",n[8]);let u=!n[2]&&V();return{c(){e=I("div"),T(t.$$.fragment),i=M(),u&&u.c(),l=M(),f=I("br"),this.h()},l(s){e=A(s,"DIV",{class:!0});var a=B(e);y(t.$$.fragment,a),i=P(a),u&&u.l(a),l=P(a),f=A(a,"BR",{}),a.forEach(p),this.h()},h(){S(e,"class","memberGrouping svelte-1edzgs0")},m(s,a){z(s,e,a),C(t,e,null),v(e,i),u&&u.m(e,null),v(e,l),v(e,f),r=!0},p(s,a){s[2]?u&&(u.d(1),u=null):u||(u=V(),u.c(),u.m(e,l))},i(s){r||(k(t.$$.fragment,s),r=!0)},o(s){w(t.$$.fragment,s),r=!1},d(s){s&&p(e),H(t),u&&u.d()}}}function V(n){let e,t;return{c(){e=I("span"),t=Y("18個以下を選択することを推奨します"),this.h()},l(i){e=A(i,"SPAN",{class:!0});var l=B(e);t=$(l,"18個以下を選択することを推奨します"),l.forEach(p),this.h()},h(){S(e,"class","weaker svelte-1edzgs0")},m(i,l){z(i,e,l),v(e,t)},d(i){i&&p(e)}}}function N(n){let e,t,i,l=n[16].kanji+"",f,r,u,s;return r=x(n[12][0]),{c(){e=I("label"),t=I("input"),i=M(),f=Y(l),this.h()},l(a){e=A(a,"LABEL",{});var c=B(e);t=A(c,"INPUT",{type:!0,name:!0,class:!0}),i=P(c),f=$(c,l),c.forEach(p),this.h()},h(){S(t,"type","checkbox"),S(t,"name","selectedMembers"),t.__value=n[16].member,t.value=t.__value,S(t,"class","svelte-1edzgs0"),r.p(t)},m(a,c){z(a,e,c),v(e,t),t.checked=~(n[0]||[]).indexOf(t.__value),v(e,i),v(e,f),u||(s=ee(t,"change",n[11]),u=!0)},p(a,c){c&1&&(t.checked=~(a[0]||[]).indexOf(t.__value))},d(a){a&&p(e),r.r(),u=!1,s()}}}function K(n){let e,t,i=n[15],l,f,r;const u=()=>n[9](t,i),s=()=>n[9](null,i);function a(...h){return n[10](n[13],...h)}let c={states:n[13].labels};t=new J({props:c}),u(),t.$on("changeFrom",a);let g=n[13].consistsOf,_=[];for(let h=0;h<g.length;h+=1)_[h]=N(L(n,g,h));return{c(){e=I("div"),T(t.$$.fragment),l=M();for(let h=0;h<_.length;h+=1)_[h].c();f=M(),this.h()},l(h){e=A(h,"DIV",{class:!0});var b=B(e);y(t.$$.fragment,b),l=P(b);for(let d=0;d<_.length;d+=1)_[d].l(b);f=P(b),b.forEach(p),this.h()},h(){S(e,"class","groupList svelte-1edzgs0")},m(h,b){z(h,e,b),C(t,e,null),v(e,l);for(let d=0;d<_.length;d+=1)_[d]&&_[d].m(e,null);v(e,f),r=!0},p(h,b){n=h,i!==n[15]&&(s(),i=n[15],u());const d={};if(t.$set(d),b&17){g=n[13].consistsOf;let o;for(o=0;o<g.length;o+=1){const m=L(n,g,o);_[o]?_[o].p(m,b):(_[o]=N(m),_[o].c(),_[o].m(e,f))}for(;o<_.length;o+=1)_[o].d(1);_.length=g.length}},i(h){r||(k(t.$$.fragment,h),r=!0)},o(h){w(t.$$.fragment,h),r=!1},d(h){h&&p(e),s(),H(t),R(_,h)}}}function be(n){let e,t,i,l=n[1].length>1&&U(n),f=n[4],r=[];for(let s=0;s<f.length;s+=1)r[s]=K(D(n,f,s));const u=s=>w(r[s],1,1,()=>{r[s]=null});return{c(){l&&l.c(),e=M(),t=I("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){l&&l.l(s),e=P(s),t=A(s,"DIV",{class:!0});var a=B(t);for(let c=0;c<r.length;c+=1)r[c].l(a);a.forEach(p),this.h()},h(){S(t,"class","memberGrouping svelte-1edzgs0")},m(s,a){l&&l.m(s,a),z(s,e,a),z(s,t,a);for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(t,null);i=!0},p(s,[a]){if(s[1].length>1?l?(l.p(s,a),a&2&&k(l,1)):(l=U(s),l.c(),k(l,1),l.m(e.parentNode,e)):l&&(G(),w(l,1,1,()=>{l=null}),q()),a&57){f=s[4];let c;for(c=0;c<f.length;c+=1){const g=D(s,f,c);r[c]?(r[c].p(g,a),k(r[c],1)):(r[c]=K(g),r[c].c(),k(r[c],1),r[c].m(t,null))}for(G(),c=f.length;c<r.length;c+=1)u(c);q()}},i(s){if(!i){k(l);for(let a=0;a<f.length;a+=1)k(r[a]);i=!0}},o(s){w(l),r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)w(r[a]);i=!1},d(s){l&&l.d(s),s&&p(e),s&&p(t),R(r,s)}}}function de(n,e,t){let{selectables:i}=e,{selectedMembers:l}=e,{nolimit:f=!1}=e,r=ge(i.map(o=>o.gen)).sort((o,m)=>parseInt(o)-parseInt(m)).map(o=>({gen:o,labels:[`全${o}期生選ぶ`,`全${o}期生外す`],consistsOf:i.filter(m=>m.gen==o)})),u=Array(r.length);function s(o,m){let F=r.find(O=>O.gen==parseInt(o));if(m.match(/選ぶ$/))for(let O of F.consistsOf)l.find(E=>O.member==E.member)||l.push(O.member);else F.consistsOf.map(O=>me(l,E=>E==O.member));t(0,l)}function a(){for(let o of u)o.resetState(0)}const c=o=>t(0,l=o.match(/選ぶ$/)?i.map(m=>m.member):[]),g=[[]],_=o=>c(o.detail.text);function h(o,m){Z[o?"unshift":"push"](()=>{u[m]=o,t(3,u)})}const b=(o,m)=>s(o.gen,m.detail.text);function d(){l=j(g[0],this.__value,this.checked),t(0,l)}return n.$$set=o=>{"selectables"in o&&t(1,i=o.selectables),"selectedMembers"in o&&t(0,l=o.selectedMembers),"nolimit"in o&&t(2,f=o.nolimit)},[l,i,f,u,r,s,c,a,_,h,b,d,g]}class ke extends Q{constructor(e){super(),W(this,e,de,be,X,{selectables:1,selectedMembers:0,nolimit:2,reset:7})}get reset(){return this.$$.ctx[7]}}export{ke as S,ge as u};
