import{s as X,a as F,e as I,d as O,b as w,l as C,k as d,f as S,i as z,z as H,n as k,g as y,B as j,a2 as $,F as ee,t as te,m as ne,w as N,y as le,o as se}from"./scheduler.D8ZwTL-f.js";import{S as ie,i as re,a as v,g as L,t as E,f as R,c as K,d as W,m as Z,e as x}from"./index.uh4Z28DD.js";import{e as B}from"./each.vO_fxj2l.js";import{a as ae,c as oe,t as ue,b as fe,S as M,s as J,d as Q}from"./StateButton.DomWuK7k.js";import{k as ce,S as he,l as _e,m as me,o as ge}from"./processData.DhlKRVw9.js";function be(){}function pe(n,e,t){var r=-1,l=n.length;e<0&&(e=-e>l?0:l+e),t=t>l?l:t,t<0&&(t+=l),l=e>t?0:t-e>>>0,e>>>=0;for(var f=Array(l);++r<l;)f[r]=n[r+e];return f}function de(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function ve(n,e){return e.length<2?n:ae(n,pe(e,0,-1))}function ke(n,e){return e=oe(e,n),n=ve(n,e),n==null||delete n[ue(de(e))]}var Se=Array.prototype,Ie=Se.splice;function we(n,e){for(var t=n?e.length:0,r=t-1;t--;){var l=e[t];if(t==r||l!==f){var f=l;ce(l)?Ie.call(n,l,1):ke(n,l)}}return n}function Ae(n,e){var t=[];if(!(n&&n.length))return t;var r=-1,l=[],f=n.length;for(e=fe(e);++r<f;){var i=n[r];e(i,r,n)&&(t.push(i),l.push(r))}return we(n,l),t}var Ee=1/0,Fe=M&&1/J(new M([,-0]))[1]==Ee?function(n){return new M(n)}:be,Oe=200;function ze(n,e,t){var r=-1,l=_e,f=n.length,i=!0,c=[],s=c;if(t)i=!1,l=me;else if(f>=Oe){var o=e?null:Fe(n);if(o)return J(o);i=!1,l=ge,s=new he}else s=e?[]:c;e:for(;++r<f;){var u=n[r],_=e?e(u):u;if(u=t||u!==0?u:0,i&&_===_){for(var h=s.length;h--;)if(s[h]===_)continue e;e&&s.push(_),c.push(u)}else l(s,_,t)||(s!==c&&s.push(_),c.push(u))}return c}function Be(n){return n&&n.length?ze(n):[]}function q(n,e,t){const r=n.slice();return r[13]=e[t],r[14]=e,r[15]=t,r}function D(n,e,t){const r=n.slice();return r[16]=e[t],r}function T(n){let e,t,r,l,f,i;t=new Q({props:{states:["全員選ぶ","全員外す"]}}),t.$on("changeFrom",n[8]);let c=!n[2]&&U();return{c(){e=I("div"),K(t.$$.fragment),r=F(),c&&c.c(),l=F(),f=I("br"),this.h()},l(s){e=w(s,"DIV",{class:!0});var o=C(e);W(t.$$.fragment,o),r=O(o),c&&c.l(o),l=O(o),f=w(o,"BR",{}),o.forEach(d),this.h()},h(){S(e,"class","memberGrouping svelte-152z6xu")},m(s,o){z(s,e,o),Z(t,e,null),k(e,r),c&&c.m(e,null),k(e,l),k(e,f),i=!0},p(s,o){s[2]?c&&(c.d(1),c=null):c||(c=U(),c.c(),c.m(e,l))},i(s){i||(v(t.$$.fragment,s),i=!0)},o(s){E(t.$$.fragment,s),i=!1},d(s){s&&d(e),x(t),c&&c.d()}}}function U(n){let e,t="18個以下を選択することを推奨します";return{c(){e=I("span"),e.textContent=t,this.h()},l(r){e=w(r,"SPAN",{class:!0,"data-svelte-h":!0}),y(e)!=="svelte-t0tg69"&&(e.textContent=t),this.h()},h(){S(e,"class","weaker svelte-152z6xu")},m(r,l){z(r,e,l)},d(r){r&&d(e)}}}function V(n){let e,t,r,l=!1,f,i=n[16].kanji+"",c,s,o,u;return s=ee(n[12][0]),{c(){e=I("label"),t=I("input"),f=F(),c=te(i),this.h()},l(_){e=w(_,"LABEL",{});var h=C(e);t=w(h,"INPUT",{type:!0,name:!0,class:!0}),f=O(h),c=ne(h,i),h.forEach(d),this.h()},h(){S(t,"type","checkbox"),S(t,"name","selectedMembers"),t.__value=r=n[16].member,N(t,t.__value),S(t,"class","svelte-152z6xu"),s.p(t)},m(_,h){z(_,e,h),k(e,t),t.checked=~(n[0]||[]).indexOf(t.__value),k(e,f),k(e,c),o||(u=le(t,"change",n[11]),o=!0)},p(_,h){h&8&&r!==(r=_[16].member)&&(t.__value=r,N(t,t.__value),l=!0),(l||h&9)&&(t.checked=~(_[0]||[]).indexOf(t.__value)),h&8&&i!==(i=_[16].kanji+"")&&se(c,i)},d(_){_&&d(e),s.r(),o=!1,u()}}}function Y(n){let e,t,r=n[15],l,f,i;const c=()=>n[9](t,r),s=()=>n[9](null,r);function o(...m){return n[10](n[13],...m)}let u={states:n[13].labels};t=new Q({props:u}),c(),t.$on("changeFrom",o);let _=B(n[13].consistsOf),h=[];for(let m=0;m<_.length;m+=1)h[m]=V(D(n,_,m));return{c(){e=I("div"),K(t.$$.fragment),l=F();for(let m=0;m<h.length;m+=1)h[m].c();f=F(),this.h()},l(m){e=w(m,"DIV",{class:!0});var b=C(e);W(t.$$.fragment,b),l=O(b);for(let p=0;p<h.length;p+=1)h[p].l(b);f=O(b),b.forEach(d),this.h()},h(){S(e,"class","groupList svelte-152z6xu")},m(m,b){z(m,e,b),Z(t,e,null),k(e,l);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(e,null);k(e,f),i=!0},p(m,b){n=m,r!==n[15]&&(s(),r=n[15],c());const p={};if(b&8&&(p.states=n[13].labels),t.$set(p),b&9){_=B(n[13].consistsOf);let a;for(a=0;a<_.length;a+=1){const g=D(n,_,a);h[a]?h[a].p(g,b):(h[a]=V(g),h[a].c(),h[a].m(e,f))}for(;a<h.length;a+=1)h[a].d(1);h.length=_.length}},i(m){i||(v(t.$$.fragment,m),i=!0)},o(m){E(t.$$.fragment,m),i=!1},d(m){m&&d(e),s(),x(t),H(h,m)}}}function Ce(n){let e,t,r,l=n[1].length>1&&T(n),f=B(n[3]),i=[];for(let s=0;s<f.length;s+=1)i[s]=Y(q(n,f,s));const c=s=>E(i[s],1,1,()=>{i[s]=null});return{c(){l&&l.c(),e=F(),t=I("div");for(let s=0;s<i.length;s+=1)i[s].c();this.h()},l(s){l&&l.l(s),e=O(s),t=w(s,"DIV",{class:!0});var o=C(t);for(let u=0;u<i.length;u+=1)i[u].l(o);o.forEach(d),this.h()},h(){S(t,"class","memberGrouping svelte-152z6xu")},m(s,o){l&&l.m(s,o),z(s,e,o),z(s,t,o);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(t,null);r=!0},p(s,[o]){if(s[1].length>1?l?(l.p(s,o),o&2&&v(l,1)):(l=T(s),l.c(),v(l,1),l.m(e.parentNode,e)):l&&(L(),E(l,1,1,()=>{l=null}),R()),o&57){f=B(s[3]);let u;for(u=0;u<f.length;u+=1){const _=q(s,f,u);i[u]?(i[u].p(_,o),v(i[u],1)):(i[u]=Y(_),i[u].c(),v(i[u],1),i[u].m(t,null))}for(L(),u=f.length;u<i.length;u+=1)c(u);R()}},i(s){if(!r){v(l);for(let o=0;o<f.length;o+=1)v(i[o]);r=!0}},o(s){E(l),i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)E(i[o]);r=!1},d(s){s&&(d(e),d(t)),l&&l.d(s),H(i,s)}}}function Ge(n,e,t){let r,l,{selectables:f}=e,{selectedMembers:i}=e,{nolimit:c=!1}=e;function s(a,g){let P=r.find(A=>A.gen==parseInt(a));if(g.match(/選ぶ$/))for(let A of P.consistsOf)i.find(G=>A.member==G.member)||i.push(A.member);else P.consistsOf.map(A=>Ae(i,G=>G==A.member));t(0,i)}function o(){for(let a of l)a.resetState(0)}const u=a=>t(0,i=a.match(/選ぶ$/)?f.map(g=>g.member):[]),_=[[]],h=a=>u(a.detail.text);function m(a,g){j[a?"unshift":"push"](()=>{l[g]=a,t(4,l),t(3,r),t(1,f)})}const b=(a,g)=>s(a.gen,g.detail.text);function p(){i=$(_[0],this.__value,this.checked),t(0,i)}return n.$$set=a=>{"selectables"in a&&t(1,f=a.selectables),"selectedMembers"in a&&t(0,i=a.selectedMembers),"nolimit"in a&&t(2,c=a.nolimit)},n.$$.update=()=>{n.$$.dirty&2&&t(3,r=Be(f.map(a=>a.gen)).sort((a,g)=>parseInt(a)-parseInt(g)).map(a=>({gen:a,labels:[`全${a}期生選ぶ`,`全${a}期生外す`],consistsOf:f.filter(g=>g.gen==a)}))),n.$$.dirty&8&&t(4,l=Array(r.length))},[i,f,c,r,l,s,u,o,h,m,b,p,_]}class qe extends ie{constructor(e){super(),re(this,e,Ge,Ce,X,{selectables:1,selectedMembers:0,nolimit:2,reset:7})}get reset(){return this.$$.ctx[7]}}export{qe as S,de as l,Be as u};
